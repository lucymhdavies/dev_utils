#!/bin/bash

alias=$(curl -s https://api.lmhd.me/v1/front.json | jq -r .members[0].name)
echo "Fronter detected: ${alias}"
if [[ "$alias" == "" ]]; then
	alias=$(cat ~/.config/lmhd/git_users.json | jq -r keys[] | fzf --no-height --reverse)
fi

name=$(cat ~/.config/lmhd/git_users.json | jq ".\"${alias}\"" | jq -r .name)
git config --unset --global user.name
git config --global user.name "${name}"

email=$(cat ~/.config/lmhd/git_users.json | jq ".\"${alias}\"" | jq -r .email)
git config --unset --global user.email
git config --global user.email "${email}"

echo Git Config Set:
git config --get-regexp user
